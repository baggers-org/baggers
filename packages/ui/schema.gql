# -----------------------------------------------
# !!! THIS FILE WAS GENERATED BY TYPE-GRAPHQL !!!
# !!!   DO NOT MODIFY THIS FILE BY YOURSELF   !!!
# -----------------------------------------------

input AddPositionInput {
  averagePrice: Float!
  brokerFees: Float
  closeDate: DateTime
  currency: String
  direction: PositionDirection!
  openDate: DateTime
  positionSize: Float!
  positionType: PositionType!
  symbol: ObjectId!
}

type AddPositionPayload {
  record: Portfolio!
  recordId: ObjectId!
}

type CreatePortfolioPayload {
  record: Portfolio!
  recordId: ObjectId!
}

"""
The javascript `Date` as string. Type represents date and time as the ISO Date string.
"""
scalar DateTime

input FindOrCreateUserInput {
  _id: String!
  displayName: String
  emails: [String!]
  photos: [String!]
}

type FindOrCreateUserPayload {
  record: User!
  recordId: ObjectId!
}

input LinkBrokerInput {
  public_token: String!
}

type Mutation {
  addPosition(id: ObjectId!, record: AddPositionInput!): AddPositionPayload!

  """Create a portfolio under your username"""
  createPortfolio: CreatePortfolioPayload!

  """Delete the specified portfolio if you have permission to do so"""
  deletePortfolio(_id: ObjectId!): CreatePortfolioPayload!
  findOrCreateUser(record: FindOrCreateUserInput!): FindOrCreateUserPayload!
  portfolioCreateLinkToken(portfolio_id: ObjectId!): PlaidCreateLinkTokenResponse!
  portfolioLinkBroker(input: LinkBrokerInput!, portfolio_id: ObjectId!): PortfolioLinkBrokerPayload!
  removePosition(portfolio_id: ObjectId!, position_id: ObjectId!): RemovePositionPayload!

  """Update portfolio details"""
  updatePortfolio(_id: ObjectId!, input: UpdatePortfolioInput!): UpdatePortfolioPayload!
}

"""Mongo object id scalar type"""
scalar ObjectId

type PlaidCreateLinkTokenResponse {
  expiration: String!
  link_token: String!
  request_id: String!
}

type PlaidItem {
  access_token: String
  isLinked: Boolean
  item_id: String
}

type Portfolio {
  _id: ObjectId!
  cash: Float!
  description: String!
  name: String!
  owner: User!
  plaid: PlaidItem
  positions: [Position!]!
  private: Boolean!
  totalValue: Float!
}

type PortfolioLinkBrokerPayload {
  record: Portfolio!
  recordId: ObjectId!
}

type Position {
  _id: ObjectId!
  averagePrice: Float!
  brokerFees: Float!
  closeDate: DateTime
  costBasis: Float!
  currency: String!
  dailyProfitLossUsd: Float!
  direction: PositionDirection!
  exposure: Float!
  marketValue: Float!
  openDate: DateTime
  positionSize: Float!
  positionType: PositionType!
  profitLossPercent: Float!
  profitLossUsd: Float!
  symbol: Symbol!
}

"""Buying vs selling"""
enum PositionDirection {
  long
  short
}

"""Shares, calls, puts"""
enum PositionType {
  calls
  puts
  shares
}

type Query {
  myPortfolios: [Portfolio!]!
  portfolio(portfolioId: ObjectId!): Portfolio!
  searchSymbols(search: String!): [Symbol!]!
}

type Quote {
  avgTotalVolume: Float
  calculationPrice: String
  change: Float
  changePercent: Float
  close: Float
  closeSource: String
  closeTime: Float
  companyName: String
  currency: String
  delayedPrice: Float
  delayedPriceTime: Float
  extendedChange: Float
  extendedChangePercent: Float
  extendedPrice: Float
  extendedPriceTime: Float
  high: Float
  highSource: String
  highTime: Float
  iexAskPrice: Float
  iexAskSize: Float
  iexBidPrice: Float
  iexBidSize: Float
  iexClose: Float
  iexCloseTime: Float
  iexLastUpdated: Float
  iexMarketPercent: Float
  iexOpen: Float
  iexOpenTime: Float
  iexRealtimePrice: Float
  iexRealtimeSize: Float
  iexVolume: Float
  isUSMarketOpen: Boolean
  lastTradeTime: Float
  latestPrice: Float
  latestSource: String
  latestTime: String
  latestUpdate: Float
  latestVolume: Float
  low: Float
  lowSource: String
  lowTime: Float
  marketCap: Float
  oddLotDelayedPrice: Float
  oddLotDelayedPriceTime: Float
  open: Float
  openSource: String
  openTime: Float
  peRatio: Float
  previousClose: Float
  previousVolume: Float
  primaryExchange: String
  symbol: String
  volume: Float
  week52High: Float
  week52Low: Float
  ytdChange: Float
}

type RemovePositionPayload {
  recordId: ObjectId!
}

type Symbol {
  _id: ObjectId!
  currency: String!
  exchange: String!
  exchangeName: String!
  name: String!
  quote: Quote!
  region: String!
  symbol: String!
  symbolType: String!
}

input UpdatePortfolioInput {
  cash: Float
  description: String
  name: String
  private: Boolean
}

type UpdatePortfolioPayload {
  record: Portfolio!
  recordId: ObjectId!
}

type User {
  _id: String!
  displayName: String!
  emails: [String!]
  photos: [String!]!
}
