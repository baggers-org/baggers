# ------------------------------------------------------
# THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
# ------------------------------------------------------

input AddHoldingInput {
  assetClass: AssetClass!
  averagePrice: Float!
  currency: String!
  direction: HoldingDirection!
  quantity: Float!
  security: String!
  transactionDate: DateTime
}

type Aggregate {
  c: Float
  h: Float
  l: Float
  n: Float
  o: Float
  t: Float
  v: Float
  vw: Float
}

enum AscDesc {
  asc
  desc
}

enum AssetClass {
  cash
  cryptocurrency
  derivative
  fx
  stock
}

input ChartPriceRangeOptions {
  from: String!
  sort: AscDesc
  timespan: Timespan!
  to: String!
}

input CreateUserInput {
  _id: String!
  displayName: String!
  emails: [String!]
  photos: [String!]
}

"""
A date-time string at UTC, such as 2019-12-03T09:54:33Z, compliant with the date-time format.
"""
scalar DateTime

type Holding {
  _id: ObjectId!
  assetClass: AssetClass!
  averagePrice: Float!
  costBasis: Float!
  createdAt: DateTime
  currency: String!
  dailyProfitLossUsd: Float!
  direction: HoldingDirection
  exposure: Float!
  importedSecurity: ImportedSecurity
  institutionValue: Float
  marketValue: Float!
  plaidAccountId: String
  profitLossPercent: Float!
  profitLossUsd: Float!
  quantity: Float!
  security: Security
  source: HoldingSource!
  updatedAt: DateTime
}

enum HoldingDirection {
  long
  short
}

type HoldingFromDb {
  _id: ObjectId!
  assetClass: AssetClass!
  averagePrice: Float!
  costBasis: Float!
  createdAt: DateTime
  currency: String!
  direction: HoldingDirection
  importedSecurity: ImportedSecurity
  institutionValue: Float
  plaidAccountId: String
  quantity: Float!
  security: Security
  source: HoldingSource!
  updatedAt: DateTime
}

enum HoldingSource {
  broker
  direct
  transactions
}

type ImportResponse {
  importedIds: [ObjectId!]!
}

type ImportedSecurity {
  """
  is_cash_equivalent: boolean | null;
    The security type of the holding. Valid security types are:  
    `cash`: Cash, currency, and money market funds  
    `cryptocurrency`: Digital or virtual currencies  
    `derivative`: Options, warrants, and other derivative instruments  
    `equity`: Domestic and foreign equities  
    `etf`: Multi-asset exchange-traded investment funds  
    `fixed income`: Bonds and certificates of deposit (CDs)  
    `loan`: Loans and loan receivables  
    `mutual fund`: Open- and closed-end vehicles pooling funds of multiple investors  
    `other`: Unknown or other investment types
  """
  assetClass: AssetClass!

  """
  Date for which `close_price` is accurate. Always `null` if `close_price` is `null`.
  """
  close_price_as_of: String

  """
  The ISO-4217 currency code of the price given. Always `null` if `unofficial_currency_code` is non-`null`.
  """
  currency: String

  """
  9-character CUSIP, an identifier assigned to North American securities.
  """
  cusip: String

  """
  If `institution_security_id` is present, this field indicates the Plaid `institution_id` of the institution to whom the identifier belongs.
  """
  institution_id: String

  """An identifier given to the security by the institution"""
  institution_security_id: String
  isImported: Boolean

  """
  Indicates that a security is a highly liquid asset and can be treated like cash.
  """
  is_cash_equivalent: Boolean

  """12-character ISIN, a globally unique securities identifier."""
  isin: String

  """
  Price of the security at the close of the previous trading session. Null for non-public securities.   If the security is a foreign currency this field will be updated daily and will be priced in USD.   If the security is a cryptocurrency, this field will be updated multiple times a day. As crypto prices can fluctuate quickly and data may become stale sooner than other asset classes, please refer to update_datetime with the time when the price was last updated.
  """
  latestPrice: Float

  """A descriptive name for the security, suitable for display."""
  name: String

  """
  In certain cases, Plaid will provide the ID of another security whose performance resembles this security, typically when the original security has low volume, or when a private security can be modeled with a publicly traded security.
  """
  proxy_security_id: String

  """
  A unique, Plaid-specific identifier for the security, used to associate securities with holdings. Like all Plaid identifiers, the `security_id` is case sensitive.
  """
  security_id: String!

  """7-character SEDOL, an identifier assigned to securities in the UK."""
  sedol: String

  """
  The security’s trading symbol for publicly traded securities, and otherwise a short identifier if available.
  """
  ticker_symbol: String

  """
  The unofficial currency code associated with the security. Always `null` if `iso_currency_code` is non-`null`. Unofficial currency codes are used for currencies that do not have official ISO currency codes, such as cryptocurrencies and the currencies of certain countries.  See the [currency code schema](https://plaid.com/docs/api/accounts#currency-code-schema) for a full listing of supported `iso_currency_code`s.
  """
  unofficial_currency_code: String

  """
  Date and time at which close_price is accurate, in ISO 8601 format (YYYY-MM-DDTHH:mm:ssZ). Always null if close_price is null.
  """
  update_datetime: String
}

type Institution {
  _id: String!
  logo: String
  name: String!
  url: String
}

type Mutation {
  portfoliosAddHolding(_id: ObjectId!, input: AddHoldingInput!): PortfolioFromDb!
  portfoliosBeginImport(publicToken: String!): ImportResponse!
  portfoliosInitEmpty: RecordId!
  portfoliosRemoveHolding(holdingId: ObjectId!, portfolioId: ObjectId!): ObjectId!
  portfoliosRemoveMultiple(_ids: [ObjectId!]!): RemoveMultipleResponse!
  portfoliosRemoveOne(_id: ObjectId!): RecordId!
  portfoliosUpdateOne(_id: ObjectId!, input: UpdatePortfolioInput!): PortfolioFromDb!
  usersFindOrCreate(input: CreateUserInput!): User!
  usersRemoveOne(_id: ID!): User!
  usersUpdateOne(input: UpdateUserInput!): User!
}

"""Mongo object id scalar type"""
scalar ObjectId

type PlaidAccount {
  """
  Plaid’s unique identifier for the account. This value will not change unless Plaid can\'t reconcile the account with the data returned by the financial institution. This may occur, for example, when the name of the account changes. If this happens a new `account_id` will be assigned to the account.  The `account_id` can also change if the `access_token` is deleted and the same credentials that were used to generate that `access_token` are used to generate a new `access_token` on a later date. In that case, the new `account_id` will be different from the old `account_id`.  If an account with a specific `account_id` disappears instead of changing, the account is likely closed. Closed accounts are not returned by the Plaid API.  Like all Plaid identifiers, the `account_id` is case sensitive.
  """
  account_id: String!
  balances: PlaidAccountBalance!

  """
  The name of the account, either assigned by the user or by the financial institution itself
  """
  name: String

  """The official name of the account as given by the financial institution"""
  official_name: String
  subtype: String
  type: PlaidAccountType
}

type PlaidAccountBalance {
  """
  The amount of funds available to be withdrawn from the account, as determined by the financial institution.  For `credit`-type accounts, the `available` balance typically equals the `limit` less the `current` balance, less any pending outflows plus any pending inflows.  For `depository`-type accounts, the `available` balance typically equals the `current` balance less any pending outflows plus any pending inflows. For `depository`-type accounts, the `available` balance does not include the overdraft limit.  For `investment`-type accounts (or `brokerage`-type accounts for API versions 2018-05-22 and earlier), the `available` balance is the total cash available to withdraw as presented by the institution.  Note that not all institutions calculate the `available`  balance. In the event that `available` balance is unavailable, Plaid will return an `available` balance value of `null`.  Available balance may be cached and is not guaranteed to be up-to-date in realtime unless the value was returned by `/accounts/balance/get`.  If `current` is `null` this field is guaranteed not to be `null`.
  """
  available: Float

  """
  The total amount of funds in or owed by the account.  For `credit`-type accounts, a positive balance indicates the amount owed; a negative amount indicates the lender owing the account holder.  For `loan`-type accounts, the current balance is the principal remaining on the loan, except in the case of student loan accounts at Sallie Mae (`ins_116944`). For Sallie Mae student loans, the account\'s balance includes both principal and any outstanding interest.  For `investment`-type accounts (or `brokerage`-type accounts for API versions 2018-05-22 and earlier), the current balance is the total value of assets as presented by the institution.  Note that balance information may be cached unless the value was returned by `/accounts/balance/get`; if the Item is enabled for Transactions, the balance will be at least as recent as the most recent Transaction update. If you require realtime balance information, use the `available` balance as provided by `/accounts/balance/get`.  When returned by `/accounts/balance/get`, this field may be `null`. When this happens, `available` is guaranteed not to be `null`.
  """
  current: Float

  """
  The ISO-4217 currency code of the balance. Always null if `unofficial_currency_code` is non-null.
  """
  iso_currency_code: String

  """
  Timestamp in [ISO 8601](https://wikipedia.org/wiki/ISO_8601) format (`YYYY-MM-DDTHH:mm:ssZ`) indicating the last time that the balance for the given account has been updated  This is currently only provided when the `min_last_updated_datetime` is passed when calling `/accounts/balance/get` for `ins_128026` (Capital One).
  """
  last_updated_datetime: String

  """
  For `credit`-type accounts, this represents the credit limit.  For `depository`-type accounts, this represents the pre-arranged overdraft limit, which is common for current (checking) accounts in Europe.  In North America, this field is typically only available for `credit`-type accounts.
  """
  limit: Float

  """
  The unofficial currency code associated with the balance. Always null if `iso_currency_code` is non-null. Unofficial currency codes are used for currencies that do not have official ISO currency codes, such as cryptocurrencies and the currencies of certain countries.  See the [currency code schema](https://plaid.com/docs/api/accounts#currency-code-schema) for a full listing of supported `unofficial_currency_code`s.
  """
  unofficial_currency_code: String
}

enum PlaidAccountType {
  brokerage
  credit
  depository
  investment
  loan
  other
}

"""
An item represents a login at a financial inst.
They will only be accessible by `admin` user's
and the primary use for storing will be to
"""
type PlaidItem {
  _id: String!
  accessToken: String!
  error: PlaidItemError
  institution: Institution!
  lastWebhookTime: DateTime!
  owner: User!
}

type PlaidItemError {
  displayMessage: String!
  documentationUrl: String!
  errorCode: Float!
  errorMessage: String!
  errorType: String!
  suggestedAction: String!
}

type PopulatedHolding {
  _id: ObjectId!
  assetClass: AssetClass!
  averagePrice: Float!
  costBasis: Float!
  createdAt: DateTime
  currency: String!
  direction: HoldingDirection
  importedSecurity: ImportedSecurity
  institutionValue: Float
  plaidAccountId: String
  quantity: Float!
  security: Security
  source: HoldingSource!
  updatedAt: DateTime
}

type Portfolio {
  _id: ObjectId!
  cash: Float!
  createdAt: DateTime
  description: String
  holdings: [Holding!]!
  name: String!
  owner: User!
  plaidAccount: PlaidAccount
  plaidItem: PlaidItem
  private: Boolean!
  totalValue: Float!
  transactions: [Transaction!]!
  updatedAt: DateTime
}

type PortfolioFromDb {
  _id: ObjectId!
  createdAt: DateTime
  description: String
  holdings: [HoldingFromDb!]!
  name: String!
  owner: User!
  plaidAccount: PlaidAccount
  plaidItem: PlaidItem
  private: Boolean!
  transactions: [TransactionFromDb!]!
  updatedAt: DateTime
}

type PortfolioSummary {
  _id: ObjectId!
  cash: Float!
  createdAt: DateTime
  description: String
  name: String!
  owner: User!
  plaidAccount: PlaidAccount
  plaidItem: PlaidItem
  private: Boolean!
  top5Holdings: [Holding!]!
  totalValue: Float!
  updatedAt: DateTime
}

type Query {
  chartSecurityPrice(options: ChartPriceRangeOptions!, ticker: String!): [Aggregate!]!
  plaidLinkToken: String!
  portfoliosCreated: [PortfolioSummary!]!
  portfoliosFindById(_id: ObjectId!): Portfolio!
  securitiesFindById(_id: String!): Security!
  securitiesSearch(searchTerm: String!): [Security!]!
  usersFindById(_id: ID!): User!
}

type RecordId {
  _id: String!
}

type RemoveMultipleResponse {
  acknowledged: Boolean!
  deletedCount: Float!
}

type Security {
  _id: String!
  assetClass: AssetClass!
  currency: String
  exchange: String
  figi: String
  isImported: Boolean
  latestPrice: Float
  name: String
  region: String
  tickerDetails: TickerDetails
  todaysChange: Float
  todaysChangePercent: Float
}

type TickerDetails {
  active: Boolean
  cik: String
  currencyName: String
  description: String
  homepageUrl: String
  iconUrl: String
  listDate: String
  logoUrl: String
  market: String
  marketCap: Float
  name: String
  phoneNumber: String
  shareClassOutstanding: Float
  sicCode: Float
  sicDescription: String
  totalEmployees: Float
  type: TickerType
  weightedSharesOutstanding: Float
}

enum TickerType {
  Adrc
  Adrr
  Adrw
  Agen
  Basket
  Bond
  Cs
  Eqlk
  Etf
  Etn
  Etv
  Fund
  Gdr
  Lt
  Nyrs
  Os
  Other
  Pfd
  Right
  Sp
  Unit
  Warrant
}

enum Timespan {
  day
  hour
  minute
  month
  quarter
  week
  year
}

type Transaction {
  _id: ObjectId!
  amount: Float!
  assetClass: AssetClass!
  createdBy: User
  currency: String!
  date: DateTime!
  fees: Float!
  importedSecurity: ImportedSecurity
  name: String!

  """This is the account_id from plaid"""
  plaidAccountId: String

  """This is the transaction_id from plaid"""
  plaidTransactionId: String
  price: Float
  quantity: Float!
  security: Security
  subType: TransactionSubtype!
  type: TransactionType!
}

type TransactionFromDb {
  _id: ObjectId!
  amount: Float!
  assetClass: AssetClass!
  createdBy: User
  currency: String!
  date: DateTime!
  fees: Float!
  importedSecurity: ImportedSecurity
  name: String!

  """This is the account_id from plaid"""
  plaidAccountId: String

  """This is the transaction_id from plaid"""
  plaidTransactionId: String
  price: Float
  quantity: Float!
  security: Security
  subType: TransactionSubtype!
  type: TransactionType!
}

enum TransactionSubtype {
  AccountFee
  Adjustment
  Assignment
  Buy
  BuyToCover
  Contribution
  Deposit
  Distribution
  Dividend
  DividendReinvestment
  Exercise
  Expire
  FundFee
  Interest
  InterestReceivable
  InterestReinvestment
  LegalFee
  LoanPayment
  LongTermCapitalGain
  LongTermCapitalGainReinvestment
  ManagementFee
  MarginExpense
  Merger
  MiscellaneousFee
  NonQualifiedDividend
  NonResidentTax
  PendingCredit
  PendingDebit
  QualifiedDividend
  Rebalance
  Request
  ReturnOfPrincipal
  Sell
  SellShort
  Send
  ShortTermCapitalGain
  ShortTermCapitalGainReinvestment
  SpinOff
  Split
  StockDistribution
  Tax
  TaxWithheld
  Transfer
  TransferFee
  TrustFee
  UnqualifiedGain
  Withdrawal
}

enum TransactionType {
  Buy
  Cancel
  Cash
  Fee
  Sell
  Transfer
}

input UpdatePortfolioInput {
  cash: Float
  description: String
  name: String
  private: Boolean
}

input UpdateUserInput {
  _id: String
  displayName: String
  emails: [String!]
  id: Int!
  photos: [String!]
}

type User {
  _id: String!
  createdAt: DateTime
  displayName: String!
  emails: [String!]
  photos: [String!]!
  updatedAt: DateTime
}