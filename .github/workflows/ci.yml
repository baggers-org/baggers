name: CI

on: 
  pull_request:

defaults:
  run:
    shell: bash


jobs:
  t:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
      - uses: ./.github/actions/set_env
  # build:
  #   if: ${{ !contains(github.event.commits[0].message, '[skip ci]') }}
  #   timeout-minutes: 20
  #   runs-on: ubuntu-latest


  #     - name: Install global dependencies
  #       run: npm i -g yarn vercel

  #     - name: Setup env files
  #       run: |
  #         envsubst < packages/graphql/.env > packages/graphql/.env
  #         envsubst < packages/ui/.env > packages/ui/.env
  #         git update-index --assume-unchanged packages/graphql/.env
  #         git update-index --assume-unchanged packages/ui/.env

  #     - name: Install workspace dependencies
  #       run: yarn workspaces focus -A

  #     - name: Build
  #       run: yarn build
  #       env:
  #         NODE_ENV: production

  #     - name: Lint
  #       run: yarn lint


  #     - name: Deploy Preview
  #     - uses: amondnet/vercel-action@v20
  #       if: ${{ !contains(github.event.commits[0].message, 'chore') }}
  #       with:
  #         vercel-token: ${{ secrets.VERCEL_TOKEN }} # Required
  #         github-token: ${{ secrets.GITHUB_TOKEN }} #Optional 
  #         vercel-args: '--prod' #Optional
  #         vercel-org-id: ${{ secrets.ORG_ID}}  #Required
  #         vercel-project-id: ${{ secrets.PROJECT_ID}} #Required 
  #         working-directory: ./packages/ui
